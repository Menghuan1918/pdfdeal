<div align=center>
<h1 aligh="center">
pdfdeal
</h1>

**æ›´å¥½çš„RAGæ•ˆæœï¼**

<br>

<a href="https://github.com/Menghuan1918/pdfdeal/actions/workflows/python-test-linux.yml">
  <img src="https://github.com/Menghuan1918/pdfdeal/actions/workflows/python-test-linux.yml/badge.svg?branch=main" alt="Package tests on Ubuntu">
</a>
<a href="https://github.com/Menghuan1918/pdfdeal/actions/workflows/python-test-win.yml">
  <img src="https://github.com/Menghuan1918/pdfdeal/actions/workflows/python-test-win.yml/badge.svg?branch=main" alt="Package tests on Windows">
</a>
<a href="https://github.com/Menghuan1918/pdfdeal/actions/workflows/python-test-mac.yml">
  <img src="https://github.com/Menghuan1918/pdfdeal/actions/workflows/python-test-mac.yml/badge.svg?branch=main" alt="Package tests on MacOS">
</a>

<br>

</div>


æ›´è½»æ¾ç®€å•åœ°å¤„ç† PDFï¼Œæå–å¯è¯»æ–‡æœ¬ï¼Œç”¨ OCR è¯†åˆ«å›¾åƒæ–‡æœ¬å¹¶æ¸…ç†æ ¼å¼,ä½¿å…¶æ›´é€‚åˆæ„å»ºçŸ¥è¯†åº“ã€‚

## æœ€è¿‘æ›´æ–°

ä½ å¯ä»¥[åœ¨æ­¤å¤„](https://github.com/users/Menghuan1918/projects/3)æŸ¥çœ‹æ­£åœ¨å¼€å‘çš„æ–°åŠŸèƒ½ï¼å¦‚æœç›´æ¥ä½¿ç”¨Doc2Xè¿›è¡Œè½¬æ¢è¯·å‚é˜…[Doc2xæ”¯æŒ](./docs/doc2x_cn.md)ã€‚

### V0.1.3

#### âœ¨ æ–°ç‰¹æ€§

- æ–°å¢åŠŸèƒ½ï¼šå°† Markdown æ–‡ä»¶ä¸­çš„æ‰€æœ‰è¿œç¨‹å›¾ç‰‡æ›¿æ¢ä¸ºæœ¬åœ°å›¾ç‰‡
- é‡æ„çš„`pdfdeal`å‡½æ•°ï¼Œç°åœ¨æ”¯æŒæ‰¹é‡è¾“å…¥æ–‡ä»¶äº†

#### ğŸ› Bug ä¿®å¤

- é‡æ•´æœ¬åœ°OCRæ–‡ä»¶å¤„ç†å‡½æ•°çš„è¾“å‡ºæ ¼å¼
- `pdfdeal`æŸäº›æƒ…å†µä¸‹æ— æ³•è¾“å‡ºmdæ–‡ä»¶çš„é—®é¢˜
- åˆ é™¤ç‰ˆæœ¬0.0.xä¸­ä½¿ç”¨çš„`Doc2x`

#### ğŸš€ å…¶ä»–

- æ–‡æ¡£å°†ä¼šåœ¨ä¸‹ä¸ªç‰ˆæœ¬é‡åˆ¶

### V0.1.xç‰ˆæœ¬

è¯·å‚é˜…[0.1.2æ›´æ–°](https://github.com/Menghuan1918/pdfdeal/releases/tag/v0.1.2)ï¼Œ[0.1.1æ›´æ–°](https://github.com/Menghuan1918/pdfdeal/releases/tag/v0.1.1)ä»¥åŠ[0.1.0æ›´æ–°](https://github.com/Menghuan1918/pdfdeal/releases/tag/v0.1.0)ã€‚

## ç®€ä»‹

ä½¿ç”¨ [easyocr](https://github.com/JaidedAI/EasyOCR) æˆ– [Doc2x](./docs/doc2x_cn.md)æ¥è¯†åˆ«å›¾åƒå¹¶å°†å…¶æ·»åŠ åˆ°åŸå§‹æ–‡æœ¬ä¸­ã€‚å¯ä»¥è®¾ç½®è¾“å‡ºæ ¼å¼ä½¿ç”¨ pdf æ ¼å¼ï¼Œè¿™å°†ç¡®ä¿æ–‡æœ¬åœ¨æ–° PDF ä¸­çš„é¡µæ•°ä¸åŸå§‹æ–‡æœ¬ç›¸åŒã€‚å¯¹ PDF è¿›è¡Œå¤„ç†åä¸çŸ¥è¯†åº“åº”ç”¨ç¨‹åºï¼ˆå¦‚[Dify](https://github.com/langgenius/dify)ã€[FastGPT](https://github.com/labring/FastGPT)ï¼‰ï¼Œç†è®ºä¸Šå¯ä»¥è¾¾åˆ°æ›´å¥½çš„è¯†åˆ«ç‡ã€‚

![111](https://github.com/Menghuan1918/pdfdeal/assets/122662527/58155389-f846-41fd-9314-1cd86282e66a)

![222](https://github.com/Menghuan1918/pdfdeal/assets/122662527/457036e8-9d78-458a-8a48-763bd33e95f9)

## å¯¹Doc2xçš„æ”¯æŒ

æ–°å¢å¯¹Doc2xçš„æ”¯æŒï¼Œç›®å‰å…¶æ¯æ—¥æœ‰500é¡µçš„**å…è´¹**ä½¿ç”¨é¢åº¦ï¼Œå…¶å¯¹è¡¨æ ¼/å…¬å¼çš„è¯†åˆ«æ•ˆæœå“è¶Šã€‚

ä½ ä¹Ÿå¯ä»¥**å•ç‹¬ä½¿ç”¨**Doc2xçš„æ”¯æŒæ¨¡å—ç›´æ¥å°†pdfè½¬æ¢ä¸ºmarkdown/latex/docxç­‰æ ¼å¼ï¼Œå°±åƒä¸‹é¢è¿™æ ·ã€‚è¯¦ç»†è¯·å‚é˜…[Doc2xæ”¯æŒ](./docs/doc2x_cn.md)ã€‚


```python
from pdfdeal.doc2x import Doc2X

Client = Doc2X()
filelist = gen_folder_list("./test","pdf")
# This is a built-in function for generating the folder under the path of all the pdf, you can give any list of the form of the path of the pdf
Client.pdfdeal(filelist)
```

## ä½¿ç”¨æ–¹æ³•
[ç¤ºèŒƒä»£ç ](https://github.com/Menghuan1918/pdfdeal/blob/main/README_CN.md#%E5%B0%86%E6%96%87%E4%BB%B6%E5%A4%B9%E4%B8%AD%E7%9A%84%E6%89%80%E6%9C%89%E6%96%87%E4%BB%B6%E8%BF%9B%E8%A1%8C%E5%A4%84%E7%90%86%E5%B9%B6%E6%94%BE%E7%BD%AE%E5%9C%A8output%E6%96%87%E4%BB%B6%E5%A4%B9%E4%B8%AD)

### å®‰è£…
ä» PyPI å®‰è£…ï¼š

```bash
pip install 'pdfdeal[easyocr]'
```

ä½¿ç”¨ â€œpytesseract â€æ—¶ï¼Œè¯·ç¡®ä¿é¦–å…ˆå®‰è£…äº† [tesseract](https://github.com/tesseract-ocr/tesseract)ï¼š

```bash
pip install 'pdfdeal[pytesseract]'
```

ä½¿ç”¨è‡ªå·±çš„è‡ªå®šä¹‰OCRåŠŸèƒ½,Doc2xæˆ–è·³è¿‡OCRï¼š

```bash
pip install pdfdeal
```

ä»æºç å®‰è£…ï¼š

```bash
pip install 'pdfdeal[all] @ git+https://github.com/Menghuan1918/pdfdeal.git'
```

### å‚æ•°
é€šè¿‡ `from pdfdeal import deal_pdf` å¯¼å…¥å‡½æ•°ã€‚ä»¥ä¸‹æ˜¯è¯¥å‡½æ•°æ¥å—çš„å‚æ•°è¯´æ˜ï¼š

- **input**: `str`æˆ–`list`
  - æè¿°ï¼šè¦å¤„ç†çš„ PDF æ–‡ä»¶çš„æœ¬åœ°è·¯å¾„ã€‚
  - ç¤ºä¾‹ï¼š `["1.pdf","2.pdf"]`

- **output**: `str`, å¯é€‰ï¼Œé»˜è®¤å€¼ï¼š`"texts"`
  - æè¿°ï¼šæŒ‡å®šæ‰€éœ€çš„è¾“å‡ºç±»å‹ã€‚é€‰é¡¹åŒ…æ‹¬ï¼š
    - `"texts"`ï¼šæå–çš„æ–‡æœ¬ä½œä¸ºå­—ç¬¦ä¸²åˆ—è¡¨ï¼Œæ¯é¡µä¸€ä¸ªå­—ç¬¦ä¸²ã€‚
    - `"md"`ï¼šMarkdown æ ¼å¼çš„æ–‡æœ¬ã€‚
    - `"pdf"`ï¼šåŒ…å«æå–æ–‡æœ¬çš„æ–° PDF æ–‡ä»¶ã€‚
  - ç¤ºä¾‹ï¼š`"md"`

- **ocr**: `function`, å¯é€‰ï¼Œé»˜è®¤å€¼ï¼š`None`
  - æè¿°ï¼šè‡ªå®šä¹‰ OCRï¼ˆå…‰å­¦å­—ç¬¦è¯†åˆ«ï¼‰å‡½æ•°ã€‚å¦‚æœæœªæä¾›ï¼Œå°†ä½¿ç”¨é»˜è®¤çš„ OCR å‡½æ•°ã€‚ä½¿ç”¨å­—ç¬¦ä¸² "pytesseract" ä»¥ä½¿ç”¨ pytesseractï¼Œä½¿ç”¨å­—ç¬¦ä¸² "pass" ä»¥è·³è¿‡ OCRã€‚
  - ç¤ºä¾‹è‡ªå®šä¹‰ OCR å‡½æ•°ï¼š`custom_ocr_function`ï¼Œè¾“å…¥ä¸ºï¼š`(path, language=["ch_sim", "en"], GPU=False)`ï¼Œè¿”å›ä¸€ä¸ª `string`,`bool`

- **language**: `list`, å¯é€‰ï¼Œé»˜è®¤å€¼ï¼š`["ch_sim", "en"]`
  - æè¿°ï¼šOCR ä½¿ç”¨çš„è¯­è¨€åˆ—è¡¨ã€‚é»˜è®¤è¯­è¨€æ˜¯ç®€ä½“ä¸­æ–‡ï¼ˆ`"ch_sim"`ï¼‰å’Œè‹±è¯­ï¼ˆ`"en"`ï¼‰ã€‚pytesseract ä½¿ç”¨ `["eng"]`ã€‚
  - ç¤ºä¾‹ï¼š`["en", "fr"]`

- **GPU**: `bool`, å¯é€‰ï¼Œé»˜è®¤å€¼ï¼š`False`
  - æè¿°ï¼šä¸€ä¸ªå¸ƒå°”æ ‡å¿—ï¼ŒæŒ‡ç¤ºæ˜¯å¦ä½¿ç”¨ GPU è¿›è¡Œ OCR å¤„ç†ã€‚å¦‚æœè®¾ç½®ä¸º `True`ï¼Œå°†ä½¿ç”¨ GPUã€‚
  - ç¤ºä¾‹ï¼š`True`

- **path**: `str`, å¯é€‰ï¼Œé»˜è®¤å€¼ï¼š`None`
  - æè¿°ï¼šè¾“å‡ºæ–‡ä»¶ä¿å­˜çš„ç›®å½•è·¯å¾„ã€‚ä»…åœ¨ `output` ç±»å‹ä¸º `"md"` æˆ– `"pdf"` æ—¶ä½¿ç”¨æ­¤å‚æ•°ã€‚
  - ç¤ºä¾‹ï¼š`"/path/to/save/output"`

### å°†æ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰æ–‡ä»¶è¿›è¡Œå¤„ç†å¹¶æ”¾ç½®åœ¨`Output`æ–‡ä»¶å¤¹ä¸­

```python
import os
from pdfdeal import deal_pdf
for root, dirs, files in os.walk("./PPT"):
    for file in files:
        file_path = os.path.join(root, file)
        deal_pdf(
            input=file_path, output="pdf", language=["en"], path="./Output", GPU=True
        )
        print(f"Deal with {file_path} successfully!")
```

### è·å¾—å¤„ç†åPDFæ–‡ä»¶æŒ‰é¡µåˆ†å‰²çš„æ–‡æœ¬åˆ—è¡¨

```python
from pdfdeal import deal_pdf
Text = deal_pdf(input="test.pdf", output="texts", language=["en"], GPU=True)
for text in Text:
  print(text)
```

### ä½¿ç”¨pytesseractè¿›è¡ŒOCRè¯†åˆ«

```python
from pdfdeal import deal_pdf, gen_folder_list
files = gen_folder_list("tests/pdf", "pdf")
output_path = deal_pdf(
    input=files,
    output="md",
    ocr="pytesseract",
    language=["eng"],
    path="Output",
)
for f in output_path:
    print(f"Save processed file to {f}")
```

### è·³è¿‡OCRç¯èŠ‚

```python
print(deal_pdf(input="test.pdf",ocr="pass"))
```

### ä½¿ç”¨Doc2x


```python
from pdfdeal.doc2x import Doc2X

Client = Doc2X()
filelist = gen_folder_list("./test","pdf")
# This is a built-in function for generating the folder under the path of all the pdf, you can give any list of the form of the path of the pdf
Client.pdfdeal(filelist)
```

è¯·å‚é˜…[Doc2xæ”¯æŒ](./docs/doc2x_cn.md)ã€‚
